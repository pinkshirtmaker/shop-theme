{% capture slides_slot %}
  {% for block in section.blocks %}
    {% liquid
      assign thumbnail_tag = 'div'
      
      if block.settings.image_url
        assign thumbnail_tag = 'a'
      endif
    %}

    <swiper-slide>
      <div class="card">
        <{{ thumbnail_tag }}
          class="card__thumbnail"
          {% if block.settings.image_url %}
            href="{{ block.settings.image_url }}"
          {% endif %}
          style="--aspect-ratio: 0.8; --background-color: var(--color-light-grey);"
        >
          {% if block.settings.image %}
            {{ block.settings.image | image_url: width: 620 | image_tag: link_to: block.settings.image_url }}
          {% endif %}
        </{{ thumbnail_tag }}>

        {% unless block.settings.content == blank %}
          <p class="text-body-small underline-links">{{ block.settings.content }}</p>
        {% endunless %}
      </div>
    </swiper-slide>
  {% endfor %}
{% endcapture %}

{% render 'product-slider',
  heading: section.settings.heading,
  slides_slot: slides_slot,
  slides_slot_count: section.blocks.size
%}

{% schema %}
{
  "name": "t:sections.image-block-slider.name",
  "class": "section-spacing",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:presets.settings.heading.label",
      "default": "Heading"
    }
  ],
  "blocks": [
    {
      "type": "block",
      "name": "t:presets.blocks.block.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:presets.settings.image.label"
        },
        {
          "type": "url",
          "id": "image_url",
          "label": "t:sections.image-block-slider.settings.image_url.label"
        },
        {
          "type": "inline_richtext",
          "id": "content",
          "label": "t:presets.settings.content.label",
          "default": "Text content"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.image-block-slider.name"
    }
  ]
}
{% endschema %}
